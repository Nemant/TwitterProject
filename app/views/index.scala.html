@(tweetIDForm: Form[Application.TweetID], tweetsArray : Array[Int], retweetsArray : Array[Int], totalRetweetsArray : Array[Int], totalRetweetsForUserArray : Array[Int], avgRetweetsForUserArray : Array[Int], userData : Array[UserData])

@import helper._
@import controllers.routes.javascript._

@main("Twitter") {
  	<h2>Twitter Graphs - Arsenal</h2>
	
	    @**form(action = routes.Application.generate, args = 'id -> "tweetidform") {
        
        	@inputText(
            	field = tweetIDForm("name"),
            	args = '_label -> "TweetID", 'placeholder -> "123456789"
        	)
        	
        	<p class="buttons">
            	<input type="submit">
        	<p>
		}*@
		<h3>Events</h3>
		<br/>
		Sun 3rd Mar 16.00 - Arsenal vs Tottenham Hotspur - Barclays Premier League 1 - 2
		<br/>
		Tue 5th Mar 19.45 Manchester United vs Real Madrid -  UEFA Champions League 1 - 2 (Arsenal only English team left in Champions League)
		<br/>
		Thu 7th Mar 20.05 Tottenham Hotspur vs Inter Milan - Europa League 3 - 0
		<br/>
		Thu 7th Mar 20.05 Sao Paulo vs Arsenal de Sarandi - Copa de America Libertadores 1 - 1 (Different Arsenal team from Argentina playing the Libertadores Cup)
		<br/>
		Sun 10th Mar 16.00 Liverpool vs Tottenham Hotspur - Barclays Premier League 3 - 2 (Arsenal getting closer to Spurs in Premiere League)
		<br/>
		Tue 12th Mar 19.45 Barcelona vs AC Milan - UEFA Champions League 4 - 0 (Amazing Barcelona comeback from first leg (2 - 0), Arsenal fans getting their hopes high)
		<br/>
		Wed 13th Mar 19.45 - Bayern Munich vs Arsenal - UEFA Champions League 2 - 0
		<br/>
		Fri 15th Mar 00.30 Arsenal de sarandi vs Sao Paolo  - Copa de America Libertadores 2 - 1
		<br/>
		Sat 16th Mar 15.00 - Swansea vs Arsenal - Barclays Premier League 0 - 2
		<br/>
		Sun 17th Mar 15.00 - Tottenham Hotspur vs Fulham - Barclays Premier League 0 - 1 (Arsenal catching up to Spurs)
		
		<script src="http://code.highcharts.com/highcharts.js"></script>
		<script src="http://code.highcharts.com/modules/exporting.js"></script>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/Tabs.css")">
        <script type="text/javascript" src="@routes.Application.javascriptRoutes"></script>

        <h3>Live Feed</h3>
        <div id="result"></div>
        
        <script type="text/javascript" charset="utf-8">
                
        function plus() {
        	jsRoutes.controllers.Application.liveFeed().ajax({
        		success: function(data) {
        			$("#result").html(data);
        		},
        		error: function() {
        			alert("Error!")
        		}
        	})
        };
	
	$('#liveFeedBtn').click(plus);
    window.setInterval(plus, 1000);

	</script>
	</br>
	<ul id="tabs">
	    <li><a href="#" name="#tab1">One</a></li>
	    <li><a href="#" name="#tab2">Two</a></li>
	    <li><a href="#" name="#tab3">Three</a></li>
	    <li><a href="#" name="#tab4">Four</a></li>
	    <li><a href="#" name="#tab5">Five</a></li>
	    <li><a href="#" name="#tab6">Six</a></li>
	</ul>
	
	<div id="content"> 
		<div id="tab1" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
		<div id="tab2" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
		<div id="tab3" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
		<div id="tab4" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
		<div id="tab5" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
        <div id="tab6" style="min-width: 400px; height: 400px; margin: 0 auto"></div>
    </div>

		<script>
        	var tweetData = []
        	@if(tweetsArray != null) {
            	@for(id <- tweetsArray) {
            		tweetData.push(@id);
            	}
	        }
    	
	    	var retweetData = []
	        	@if(retweetsArray != null) {
	            	@for(id <- retweetsArray) {
	            		retweetData.push(@id);
	            	}
		        }
		
		$(function () {
        $('#tab1').highcharts({
            chart: {
                zoomType: 'x',
                spacingRight: 20
            },
            title: {
                text: 'Volume of Data (2nd of March - 21st of March) - Tweets: 2,085,498 - ReTweets: 1,041,125' 
            },
            subtitle: {
                text: document.ontouchstart === undefined ?
                    'Click and drag in the plot area to zoom in' :
                    'Drag your finger over the plot to zoom in'
            },
            xAxis: {
                type: 'datetime',
                maxZoom: 1 * 3600000, // 1 day
                title: {
                    text: null
                }
            },
            yAxis: {
                title: {
                    text: 'Total Tweets/ReTweets'
                },
                type: 'linear'
            },
            tooltip: {
                shared: true
            },
            legend: {
                enabled: true
            },
            plotOptions: {
                area: {
                    fillColor: {
                        linearGradient: { x1: 0, y1: 0, x2: 0, y2: 1},
                        stops: [
                            [0, Highcharts.getOptions().colors[0]],
                            [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get('rgba')]
                        ]
                    },
                    lineWidth: 1,
                    marker: {
                        enabled: false
                    },
                    shadow: false,
                    states: {
                        hover: {
                            lineWidth: 1
                        }
                    },
                    threshold: null
                }
            },
    
            series: [{
                type: 'area',
                name: 'Tweets',
                pointInterval: 10 * 60 * 1000,
                pointStart: Date.UTC(2013, 2, 02, 22, 46, 15, 0),
                data: tweetData
            }, {
            	type: 'area',
                name: 'ReTweets',
                color: '#FF0000',
                pointInterval: 10 * 60 * 1000,
                pointStart: Date.UTC(2013, 2, 02, 22, 46, 15, 0),
                data: retweetData
            }]
        });
    });
    </script>

    <script>
	
    var ratioData = []
        for(var i = 0; i < tweetData.length; i++) {
            ratioData.push(retweetData[i]/ tweetData[i]);
        }
    
	$(function () {
	        $('#tab2').highcharts({
	            chart: {
	                zoomType: 'x',
	                spacingRight: 20
	            },
	            title: {
	                text: 'Ratio of Tweet to ReTweet over time'
	            },
	            subtitle: {
	                text: document.ontouchstart === undefined ?
	                    'Click and drag in the plot area to zoom in' :
	                    'Drag your finger over the plot to zoom in'
	            },
	            xAxis: {
	                type: 'datetime',
	                maxZoom: 1 * 3600000, // 1 day
	                title: {
	                    text: null
	                }
	            },
	            yAxis: {
	                title: {
	                    text: 'ReTweets/Tweets Ratio'
	                },
	                type: 'linear'
	            },
	            tooltip: {
	                shared: true
	            },
	            legend: {
	                enabled: true
	            },
	            series: [{
	                type: 'area',
	                name: 'Ratio',
	                pointInterval: 10 * 60 * 1000,
	                pointStart: Date.UTC(2013, 2, 02, 22, 46, 15, 0),
	                data: ratioData
	            }]
	        });
	    });
	
	</script>

    <script>
    var totalRetweetData = []
    @if(totalRetweetsArray != null) {
    	@for(i <- 0 until totalRetweetsArray.length){
    		totalRetweetData.push(@totalRetweetsArray(i));
		}
	}
    
    $(function () {
        $('#tab3').highcharts({
            chart: {
                zoomType: 'x',
                spacingRight: 20
            },
            title: {
                text: 'Number of retweeted messages against number of ReTweets - Messages: 200,470' 
            },
            subtitle: {
                text: document.ontouchstart === undefined ?
                    'Click and drag in the plot area to zoom in' :
                    'Drag your finger over the plot to zoom in'
            },
            xAxis: {
                maxZoom: 20, // 1 day
                type: 'linear',
                title: {
                    text: 'Number of times they got retweeted'
                }
            },
            yAxis: {
                type: 'logarithmic',
                title: {
                    text: 'Number of messages which got retweeted'
                }
            },
            tooltip: {
                shared: true
            },
            legend: {
                enabled: true
            },
            series: [{
                type: 'column',
                name: 'Number of messages',
                pointInterval: 50,
                pointStart: 1,
                data: totalRetweetData
            }]
        });
    });
    </script>

    <script>
    var totalRetweeForUsertData = []
    @if(totalRetweetsArray != null) {
    	@for(i <- 0 until totalRetweetsForUserArray.length){
    		totalRetweeForUsertData.push(@totalRetweetsForUserArray(i));
		}
	}
    
    $(function () {
        $('#tab4').highcharts({
            chart: {
                //zoomType: 'x',
                //spacingRight: 20,
            },
            title: {
                text: 'Number of retweeted users against total number of ReTweets - Users: 108,826' 
            },
            subtitle: {
                text: document.ontouchstart === undefined ?
                    'Click and drag in the plot area to zoom in' :
                    'Drag your finger over the plot to zoom in'
            },
            xAxis: {
               // maxZoom: 20, // 1 day
                type: 'linear',
                title: {
                    text: 'Total Retweets recieved'
                }
            },
            yAxis: {
                type: 'logarithmic',
                title: {
                    text: 'Number of users'
                }
            },
            tooltip: {
                shared: true
            },
            legend: {
                enabled: true
            },
            series: [{
                type: 'column',
                name: 'Users',
                pointInterval: 100,
                pointStart:1 ,
                data: totalRetweeForUsertData
            }]
        });
    });
    </script>
		
    <script>
    var avgRetweeForUsertData = []
    @if(totalRetweetsArray != null) {
    	@for(i <- 0 until avgRetweetsForUserArray.length){
    		avgRetweeForUsertData.push(@avgRetweetsForUserArray(i));
		}
	}
    
    $(function () {
        $('#tab5').highcharts({
            chart: {
                zoomType: 'x',
                spacingRight: 20
            },
            title: {
                text: 'Number of ReTweeted users against their average number of ReTweets' 
            },
            subtitle: {
                text: document.ontouchstart === undefined ?
                    'Click and drag in the plot area to zoom in' :
                    'Drag your finger over the plot to zoom in'
            },
            xAxis: {
                maxZoom: 20, // 1 day
                type: 'linear',
                title: {
                    text: 'Average retweets'
                }
            },
            yAxis: {
                type: 'logarithmic',
                title: {
                    text: 'Number of users'
                }
            },
            tooltip: {
                shared: true
            },
            legend: {
                enabled: true
            },
            series: [{
                type: 'column',
                name: 'Users',
                pointInterval: 30,
                pointStart: 1,
                data: avgRetweeForUsertData
            }]
        });
    });
    </script>
    <script>
    var userDataSeries = []

    @for(i <- 0 until userData.length){
        userDataSeries.push({name: '@userData(i).getUserName()', color: 'rgba(119, 152, 191, .5)', data: [[@userData(i).getTotalRT(), @userData(i).getFollowers()]]});
    }
    $(function () {
        $('#tab6').highcharts({
            chart: {
                type: 'scatter',
                zoomType: 'xy'
            },
            title: {
                text: 'Total Retweets vs No. of Followers'
            },
            subtitle: {
                text: ''
            },
            xAxis: {
                title: {
                    enabled: true,
                    text: 'No. of Followers'
                },
                startOnTick: true,
                endOnTick: true,
                showLastLabel: true
            },
            yAxis: {
                title: {
                    text: 'Total Retweets'
                }
            },
            legend: {
                layout: 'vertical',
                align: 'left',
                verticalAlign: 'top',
                x: 100,
                y: 70,
                floating: true,
                backgroundColor: '#FFFFFF',
                borderWidth: 1
            },
            plotOptions: {
                scatter: {
                    marker: {
                        radius: 5,
                        states: {
                            hover: {
                                enabled: true,
                                lineColor: 'rgb(100,100,100)'
                            }
                        }
                    },
                    states: {
                        hover: {
                            marker: {
                                enabled: false
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<b>{series.name}</b><br>',
                        pointFormat: '{point.x} Followers, {point.y} Retweets'
                    }
                }
            },
            series: userDataSeries
        });
    });
    
    </script>
    
        <script>
        function resetTabs(){
            $("#content > div").hide(); //Hide all content
            $("#tabs a").attr("id",""); //Reset id's      
        }

        var myUrl = window.location.href; //get URL
        var myUrlTab = myUrl.substring(myUrl.indexOf("#")); // For mywebsite.com/tabs.html#tab2, myUrlTab = #tab2     
        var myUrlTabName = myUrlTab.substring(0,4); // For the above example, myUrlTabName = #tab

        (function(){
            $("#content > div").hide(); // Initially hide all content
            $("#tabs li:first a").attr("id","current"); // Activate first tab
            $("#content > div:first").fadeIn(); // Show first tab content
            
            $("#tabs a").on("click",function(e) {
                e.preventDefault();
                if ($(this).attr("id") == "current"){ //detection for current tab
                 return       
                }
                else{             
                resetTabs();
                $(this).attr("id","current"); // Activate this
                $($(this).attr('name')).fadeIn(); // Show content for current tab
                }
            });

            for (i = 1; i <= $("#tabs li").length; i++) {
              if (myUrlTab == myUrlTabName + i) {
                  resetTabs();
                  $("a[name='"+myUrlTab+"']").attr("id","current"); // Activate url tab
                  $(myUrlTab).fadeIn(); // Show url tab content        
              }
            }
        })()
        
        </script>
}
